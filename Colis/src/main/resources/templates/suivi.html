<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${'Suivi - ' + colis.codeSuivi}">Suivi de colis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .etape-active {
            border-color: #3b82f6;
            color: #3b82f6;
        }
        .etape-complete {
            background-color: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }
        .etape-future {
            border-color: #e5e7eb;
            color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-50">
<!-- Navbar -->
<nav class="bg-blue-600 text-white py-4">
    <div class="container mx-auto px-6 flex items-center justify-between">
        <a href="/" class="text-xl font-bold">Amana Express</a>
        <div class="flex space-x-4">
            <a href="/about" class="hover:text-blue-200">À propos</a>
            <a href="/contact" class="hover:text-blue-200">Contact</a>
        </div>
    </div>
</nav>

<!-- Main Content -->
<main class="container mx-auto px-6 py-8">
    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden">
        <!-- Header -->
        <div class="bg-blue-600 text-white p-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div>
                    <h1 class="text-2xl font-bold">Suivi de votre colis</h1>
                    <p class="text-blue-100">Code de suivi: <span class="font-mono" th:text="${colis.codeSuivi}">AMNA123456789</span></p>
                </div>
                <div class="mt-4 md:mt-0">
                    <span class="bg-blue-700 text-white px-4 py-2 rounded-lg font-medium" th:text="${colis.statut.label}">EN LIVRAISON</span>
                </div>
            </div>
        </div>

        <!-- Delivery Progress -->
        <div class="p-6 border-b">
            <h2 class="text-lg font-semibold mb-6">Progression de votre livraison</h2>

            <!-- Progress Bar -->
            <div class="mb-8">
                <div class="flex justify-between mb-2">
                    <span class="text-sm font-medium" th:text="${progression + '%'}">75%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div class="bg-blue-600 h-2.5 rounded-full" th:style="'width: ' + ${progression} + '%'"></div>
                </div>
            </div>

            <!-- Steps -->
            <div class="relative">
                <div class="absolute left-4 top-4 h-full w-1 bg-gray-200">
                    <div class="h-full bg-blue-500" th:style="'height:' + ${progression} + '%;'"></div>
                </div>

                <div class="space-y-8 pl-12">
                    <div th:each="etape, iter : ${etapes}" class="relative flex items-start">
                        <div class="absolute -left-12 flex items-center justify-center w-8 h-8 rounded-full border-2"
                             th:class="${iter.last} ? 'border-blue-500 text-blue-500' :
                                        'bg-blue-500 border-blue-500 text-white'">
                            <svg th:if="${!iter.last}" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                            </svg>
                            <span th:if="${iter.last}" th:text="${iter.index + 1}"></span>
                        </div>
                        <div>
                            <h3 class="font-medium" th:text="${etape.label}">EN LIVRAISON</h3>
                            <p class="text-gray-600 text-sm" th:switch="${etape}">
                                <span th:case="ENREGISTRE">Colis enregistré dans notre système</span>
                                <span th:case="EN_TRANSIT">Colis en cours de transport vers le centre de distribution</span>
                                <span th:case="EN_LIVRAISON">Colis en cours de livraison à votre adresse</span>
                                <span th:case="LIVRE">Colis livré avec succès</span>
                                <span th:case="ANNULE">Livraison annulée</span>
                            </p>
                            <p class="text-gray-500 text-xs mt-1" th:text="${#temporals.format(colis.dateEnregistrement.plusDays(iter.index), 'dd/MM/yyyy HH:mm')}">
                                15 Mai 2023 - 14:30
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Package Info -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
            <!-- Sender Info -->
            <div>
                <h3 class="text-lg font-semibold mb-4">Informations expéditeur</h3>
                <div class="space-y-2">
                    <p><span class="font-medium">Nom:</span> <span th:text="${colis.expediteur}">Amyra Mouhib</span></p>
                    <p><span class="font-medium">Date d'envoi:</span> <span th:text="${#temporals.format(colis.dateEnregistrement, 'dd/MM/yyyy HH:mm')}">12/05/2023</span></p>
                </div>
            </div>

            <!-- Recipient Info -->
            <div>
                <h3 class="text-lg font-semibold mb-4">Informations destinataire</h3>
                <div class="space-y-2">
                    <p><span class="font-medium">Nom:</span> <span th:text="${colis.destinataire}">Manal Ejjebli</span></p>
                    <p><span class="font-medium">Adresse:</span> <span th:text="${colis.adresseLivraison}">123 Rue Hassan II, Casablanca</span></p>
                    <p><span class="font-medium">Poids:</span> <span th:text="${colis.poids} + ' kg'">2.5 kg</span></p>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="bg-gray-50 p-6 flex flex-col sm:flex-row justify-end space-y-4 sm:space-y-0 sm:space-x-4">
            <form th:action="@{/annuler/${colis.codeSuivi}}" method="post">
                <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                    Annuler la livraison
                </button>
            </form>
            <a href="#" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                </svg>
                Contacter le livreur
            </a>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="bg-gray-800 text-white py-8 mt-12">
    <div class="container mx-auto px-6 text-center">
        <p class="text-sm">© 2023 Amana Express. Tous droits réservés.</p>
    </div>
</footer>
</body>
</html>

























<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Détails du colis</title>-->
<!--</head>-->
<!--<body>-->
<!--<h1>Détails du colis <span th:text="${colis.codeSuivi}"></span></h1>-->

<!--<div>-->
<!--    <h2>Progression: <span th:text="${progression}">%</span>%</h2>-->
<!--    <div style="width:100%; background:#ccc;">-->
<!--        <div th:style="'width:' + ${progression} + '%; background:blue; height:20px;'"></div>-->
<!--    </div>-->
<!--</div>-->

<!--<h3>Statut actuel: <span th:text="${currentStatus.label}"></span></h3>-->

<!--<h4>Toutes les étapes:</h4>-->
<!--<ul>-->
<!--    <li th:each="status : ${allStatuses}"-->
<!--        th:style="${status == currentStatus} ? 'font-weight:bold; color:blue;' : ''"-->
<!--        th:text="${status.label}"></li>-->
<!--</ul>-->

<!--<form th:action="@{/suivi/{code}/annuler(code=${colis.codeSuivi})}" method="post">-->
<!--    <button type="submit">Annuler ce colis</button>-->
<!--</form>-->
<!--</body>-->
<!--</html>-->










<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Suivi de colis - Amana Express</title>-->
<!--    <script src="https://cdn.tailwindcss.com"></script>-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Poppins', sans-serif;-->
<!--        }-->
<!--        .etape-active {-->
<!--            border-color: #3b82f6;-->
<!--            color: #3b82f6;-->
<!--        }-->
<!--        .etape-complete {-->
<!--            background-color: #3b82f6;-->
<!--            border-color: #3b82f6;-->
<!--            color: white;-->
<!--        }-->
<!--        .etape-future {-->
<!--            border-color: #e5e7eb;-->
<!--            color: #9ca3af;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="bg-gray-50">-->
<!--&lt;!&ndash; Navbar &ndash;&gt;-->
<!--<nav class="bg-blue-600 text-white py-4">-->
<!--    <div class="container mx-auto px-6 flex items-center justify-between">-->
<!--        <a href="/" class="text-xl font-bold">Amna Express</a>-->
<!--    </div>-->
<!--</nav>-->

<!--&lt;!&ndash; Contenu principal &ndash;&gt;-->
<!--<main class="container mx-auto px-6 py-8">-->
<!--    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden">-->
<!--        &lt;!&ndash; En-tête &ndash;&gt;-->
<!--        <div class="bg-blue-600 text-white p-6">-->
<!--            <div class="flex justify-between items-center">-->
<!--                <div>-->
<!--                    <h1 class="text-2xl font-bold">Suivi de votre colis</h1>-->
<!--                    <p class="text-blue-100">Code de suivi: <span class="font-mono" th:text="${colis.codeSuivi}">AMNA123456789</span></p>-->
<!--                </div>-->
<!--                <div class="bg-blue-700 text-white px-4 py-2 rounded-lg">-->
<!--                    <span th:text="${colis.statut}" class="font-medium">EN LIVRAISON</span>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Cycle de vie du colis - Version simplifiée &ndash;&gt;-->
<!--        <div class="p-6 border-b">-->
<!--            <h2 class="text-lg font-semibold mb-6">Progression de votre livraison</h2>-->

<!--            &lt;!&ndash; Barre de progression &ndash;&gt;-->
<!--            <div class="w-full bg-gray-200 rounded-full h-4 mb-6">-->
<!--                <div class="bg-blue-600 h-4 rounded-full"-->
<!--                     th:style="'width:' + ${progression} + '%'"></div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Étapes de livraison &ndash;&gt;-->
<!--            <div class="space-y-4">-->
<!--                <div th:each="status : ${allStatuses}"-->
<!--                     class="flex items-center">-->
<!--                    &lt;!&ndash; Icône &ndash;&gt;-->
<!--                    <div th:class="${status.ordinal() < currentStatus.ordinal()} ?-->
<!--                            'bg-green-500 text-white' :-->
<!--                            ${status == currentStatus} ?-->
<!--                            'bg-blue-500 text-white' :-->
<!--                            'bg-gray-200'"-->
<!--                         class="w-8 h-8 rounded-full flex items-center justify-center mr-3">-->
<!--                        <span th:text="${status.ordinal() + 1}">1</span>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Texte &ndash;&gt;-->
<!--                    <div th:class="${status == currentStatus} ? 'font-bold text-blue-600' : ''">-->
<!--                        <span th:text="${status.label}">Statut</span>-->
<!--                        <span th:if="${status == currentStatus}" class="ml-2">(Actuel)</span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Informations du colis &ndash;&gt;-->
<!--        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">-->
<!--            &lt;!&ndash; Informations expéditeur &ndash;&gt;-->
<!--            <div>-->
<!--                <h3 class="text-lg font-semibold mb-4">Informations expéditeur</h3>-->
<!--                <div class="space-y-2">-->
<!--                    <p><span class="font-medium">Nom:</span> <span th:text="${colis.expediteur}">Mohamed Ali</span></p>-->
<!--                    <p><span class="font-medium">Date d'envoi:</span> <span th:text="${colis.dateEnregistrement}">12/05/2023</span></p>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Informations destinataire &ndash;&gt;-->
<!--            <div>-->
<!--                <h3 class="text-lg font-semibold mb-4">Informations destinataire</h3>-->
<!--                <div class="space-y-2">-->
<!--                    <p><span class="font-medium">Nom:</span> <span th:text="${colis.destinataire}">Karim Benzema</span></p>-->
<!--                    <p><span class="font-medium">Adresse:</span> <span th:text="${colis.adresseLivraison}">123 Rue Hassan II, Casablanca</span></p>-->
<!--                    <p><span class="font-medium">Poids:</span> <span th:text="${colis.poids} + ' kg'}">2.5 kg</span></p>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Actions &ndash;&gt;-->
<!--        <div class="bg-gray-50 p-6 flex flex-col sm:flex-row justify-end space-y-4 sm:space-y-0 sm:space-x-4">-->
<!--            <button class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition">-->
<!--                Annuler la livraison-->
<!--            </button>-->
<!--            <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition">-->
<!--                Contacter le livreur-->
<!--            </button>-->
<!--        </div>-->
<!--    </div>-->
<!--</main>-->

<!--&lt;!&ndash; Footer &ndash;&gt;-->
<!--<footer class="bg-gray-800 text-white py-8 mt-12">-->
<!--    <div class="container mx-auto px-6 text-center">-->
<!--        <p class="text-sm">© 2023 Amna Express. Tous droits réservés.</p>-->
<!--    </div>-->
<!--</footer>-->
<!--</body>-->
<!--</html>-->